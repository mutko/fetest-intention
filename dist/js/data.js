"use strict";function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}var Business=function e(a,s,t,i,n){_classCallCheck(this,e),this.country=a,this.type=s,this.phone=t,this.address=i,this.location=n},business1=new Business("Srbija","Franšiza","+381 234628","Lorem ipsum dolor sit amet",[44.01667,20.91667]),business2=new Business("Srbija","Veleprodaja","+381 9283747492","Consectetur adipiscing elit",[44.787197,20.457273]),business3=new Business("Srbija","Maloprodaja","+381 99283747","Nunc maximus turpis",[43.72583,20.68944]),business4=new Business("Srbija","Franšiza","+381 27693423","Donec blandit quam",[43.89139,20.34972]),business5=new Business("Nemačka","Franšiza","+49 27636325687","Nec tincidunt augue ullamcorper",[44.77583,17.18556]),business6=new Business("Nemačka","Franšiza","+49 238942934","Vivamus vitae lacus",[43.343033,17.807894]),business7=new Business("Srbija","Franšiza","+381 23846923234","Interdum et malesuada fames",[43.90358,22.26405]),business8=new Business("Nemačka","Franšiza","+49 23619509","Ac ante ipsum primis in faucibus",[43.7826,19.29256]),business9=new Business("Nemačka","Veleprodaja","+49 846597456","Nam non odio vel",[44.75874,19.21437]),business10=new Business("Nemačka","Veleprodaja","+49 493856238456","Duis libero urna",[43.85643,18.413029]),business11=new Business("Srbija","Maloprodaja","+381 42569845","Dignissim vitae mattis ut",[45.267136,19.833549]),business12=new Business("Nemačka","Franšiza","+49 4385608465","Vestibulum eget purus",[44.53842,18.66709]),business13=new Business("Nemačka","Maloprodaja","+49 237845287354","Aenean hendrerit lacinia nisi",[44.22637,17.66583]),business14=new Business("Srbija","Maloprodaja","+381 3867364","Nullam vitae imperdiet neque",[43.32472,21.90333]),business15=new Business("Srbija","Maloprodaja","+381 38764297385","Donec laoreet lorem",[43.58,21.33389]),business16=new Business("Srbija","Franšiza","+381 374729384","In et varius erat",[43.13667,20.51222]),business17=new Business("Srbija","Maloprodaja","+381 237846392","Mauris eleifend tellus non",[44.268273,19.890655]),business18=new Business("Srbija","Franšiza","+381 23984769287","Donec gravida sodales odio",[44.30694,20.56]),data={business:[business1,business2,business3,business4,business5,business6,business7,business8,business9,business10,business11,business12,business13,business14,business15,business16,business17,business18],tableContent:[],filterCombo:[],filters:{country:[],type:[]},visibleRows:[]};function doArrayInclude(e,a){return-1!=e.indexOf(a)}!function(e){for(var a=document.getElementById("table-content"),s="",t=0;t<e.length;t++){var i=e[t].country,n=e[t].type,o=e[t].phone,r=e[t].address,l=e[t].location,d=void 0,c=void 0;d="Franšiza"===e[t].type?"fransiza":e[t].type.toLowerCase(),c="Nemačka"===e[t].country?"nemacka":e[t].country.toLowerCase(),s+='\n                      <tr data-country="'.concat(c,'" data-type="').concat(d,'" data-lat="').concat(l[0],'" data-long="').concat(l[1],'">\n                        <td>').concat(i,"</td>\n                        <td>").concat(n,"</td>\n                        <td>").concat(o,"</td>\n                        <td>").concat(r,"</td>\n                      </tr>\n                   ")}a.innerHTML=s}(data.business),data.tableContent=$("#table-content tr").toArray();var getActiveCheckbox=function(){$(".data__place input[type=checkbox]:checked").each((function(){data.filters.country.push($(this).val())})),$(".data__business input[type=checkbox]:checked").each((function(){data.filters.type.push($(this).val())}))},combineFilter=function(){if(data.filters.country&&data.filters.type)for(var e=0;e<data.filters.country.length;e++)for(var a=0;a<data.filters.type.length;a++)data.filterCombo.push(data.filters.country[e]+" "+data.filters.type[a])},displayRows=function(){var e=$(".data__table-wrapper"),a=$("#table");0===data.filters.country.length&&0===data.filters.type.length&&0===data.filterCombo.length?(a.hide(),e.append("<p id='no-filters'>No items to display. Please select a filter.</p>")):($("#no-filters").remove(),a.show(),$.each(data.tableContent,(function(){var e=$(this);if(e.hide(),0===data.filterCombo.length){if(data.filters.country.length>=1)for(var a=0;a<data.filters.country.length;a++)data.filters.country[a]===e.data("country")&&e.show();if(data.filters.type.length>=1)for(var s=0;s<data.filters.type.length;s++)data.filters.type[s]===e.data("type")&&e.show()}else for(var t=0;t<data.filterCombo.length;t++)data.filterCombo[t]===e.data("country")+" "+e.data("type")&&e.show()})))},listWithoutDisplayNone=function(e){if(data.visibleRows=[],"none"===document.getElementById("table").style.display)data.visibleRows=[];else for(var a=0;a<e.length;a++)"none"!==e[a].style.display&&data.visibleRows.push(e[a])},renderMap=function(e){document.getElementById("map-wrapper").innerHTML="<div id='map' style='width: 100%; height: 100%;'></div>";var a=L.map("map").setView([44.75874,19.21437],7);L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibXV0a28iLCJhIjoiY2p1NzE0YzltMG9vazN5azlyZTAyY29hYSJ9.ZZZ1WAXOHdqF5fy2Gazgiw",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",accessToken:"pk.eyJ1IjoibXV0a28iLCJhIjoiY2p1NzE0YzltMG9vazN5azlyZTAyY29hYSJ9.ZZZ1WAXOHdqF5fy2Gazgiw"}).addTo(a);var s=L.divIcon({iconSize:[220,212],iconAnchor:[80,155],className:"marker-fransiza"}),t=L.divIcon({iconSize:[80,80],iconAnchor:[40,90],className:"marker-veleprodaja"}),i=L.divIcon({iconSize:[40,40],iconAnchor:[20,40],className:"marker-maloprodaja"});e.forEach((function(e){"fransiza"===e.dataset.type?L.marker([+e.dataset.lat,+e.dataset.long],{icon:s,riseOnHover:!0}).addTo(a):"veleprodaja"===e.dataset.type?L.marker([+e.dataset.lat,+e.dataset.long],{icon:t}).addTo(a):L.marker([+e.dataset.lat,+e.dataset.long],{icon:i}).addTo(a)}))};getActiveCheckbox(),combineFilter(),displayRows(),listWithoutDisplayNone(data.tableContent),renderMap(data.visibleRows),$(".data__place input").change((function(e){e.preventDefault(),data.filterCombo=[];var a=$(this),s=a.val(),t=data.filters.country;this.checked&&(doArrayInclude(t,s)||t.push(s),a.siblings("label").addClass("active")),this.checked||(t.splice($.inArray(s,t),1),a.siblings("label").removeClass("active")),combineFilter(),displayRows(),listWithoutDisplayNone(data.tableContent),renderMap(data.visibleRows)})),$(".data__business input").change((function(e){e.preventDefault(),data.filterCombo=[];var a=$(this),s=a.val(),t=data.filters.type;this.checked&&(doArrayInclude(t,s)||(t.push(s),a.siblings("label").addClass("active"))),this.checked||(t.splice($.inArray(s,t),1),a.siblings("label").removeClass("active")),combineFilter(),displayRows(),listWithoutDisplayNone(data.tableContent),renderMap(data.visibleRows)}));